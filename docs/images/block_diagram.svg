<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <!-- Gradient backgrounds -->
    <linearGradient id="neural_grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f2f8ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d5e6ff;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="signal_grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f0fff2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d0f0d9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="ai_grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fff6e9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffe4c4;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="stim_grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f9f0ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e6d5f9;stop-opacity:1" />
    </linearGradient>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial" font-size="24" fill="#2c3e50" text-anchor="middle" font-weight="bold">적응형 신경 자극 시스템 - 블록 다이어그램</text>
  
  <!-- Neural Signal Acquisition Section -->
  <g>
    <rect x="100" y="100" width="180" height="120" rx="10" ry="10" fill="url(#neural_grad)" stroke="#3498db" stroke-width="2" />
    <text x="190" y="130" font-family="Arial" font-size="16" fill="#2c3e50" text-anchor="middle" font-weight="bold">신경 신호 획득</text>
    <line x1="140" y1="145" x2="240" y2="145" stroke="#3498db" stroke-width="1" />
    <text x="190" y="170" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 전극 인터페이스</text>
    <text x="190" y="190" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 신호 증폭</text>
    <text x="190" y="210" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- ADC 변환</text>
  </g>
  
  <!-- Signal Processing Module -->
  <g>
    <rect x="360" y="100" width="180" height="120" rx="10" ry="10" fill="url(#signal_grad)" stroke="#27ae60" stroke-width="2" />
    <text x="450" y="130" font-family="Arial" font-size="16" fill="#2c3e50" text-anchor="middle" font-weight="bold">신호 처리</text>
    <line x1="400" y1="145" x2="500" y2="145" stroke="#27ae60" stroke-width="1" />
    <text x="450" y="170" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 필터링 &amp; 노이즈 제거</text>
    <text x="450" y="190" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 특성 추출</text>
    <text x="450" y="210" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 스파이크 검출</text>
  </g>
  
  <!-- AI Analysis Module -->
  <g>
    <rect x="450" y="280" width="220" height="160" rx="10" ry="10" fill="url(#ai_grad)" stroke="#e67e22" stroke-width="2" />
    <text x="560" y="310" font-family="Arial" font-size="16" fill="#2c3e50" text-anchor="middle" font-weight="bold">AI 분석 엔진</text>
    <line x1="490" y1="325" x2="630" y2="325" stroke="#e67e22" stroke-width="1" />
    <text x="560" y="350" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- LSTM 신경망</text>
    <text x="560" y="370" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- DQN 강화학습 에이전트</text>
    <text x="560" y="390" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 패턴 인식</text>
    <text x="560" y="410" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 상태-행동 매핑</text>
    <text x="560" y="430" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 보상 함수 계산</text>
  </g>
  
  <!-- Stimulation Generator -->
  <g>
    <rect x="230" y="300" width="180" height="120" rx="10" ry="10" fill="url(#stim_grad)" stroke="#9b59b6" stroke-width="2" />
    <text x="320" y="330" font-family="Arial" font-size="16" fill="#2c3e50" text-anchor="middle" font-weight="bold">자극 생성기</text>
    <line x1="270" y1="345" x2="370" y2="345" stroke="#9b59b6" stroke-width="1" />
    <text x="320" y="370" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 파형 생성</text>
    <text x="320" y="390" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 매개변수 조정</text>
    <text x="320" y="410" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 자극 제어</text>
  </g>
  
  <!-- Feedback & Monitoring -->
  <g>
    <rect x="620" y="100" width="180" height="120" rx="10" ry="10" fill="#e8f4f8" stroke="#2980b9" stroke-width="2" />
    <text x="710" y="130" font-family="Arial" font-size="16" fill="#2c3e50" text-anchor="middle" font-weight="bold">피드백 &amp; 모니터링</text>
    <line x1="650" y1="145" x2="770" y2="145" stroke="#2980b9" stroke-width="1" />
    <text x="710" y="170" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 반응 분석</text>
    <text x="710" y="190" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 성능 지표 추적</text>
    <text x="710" y="210" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 안전 모니터링</text>
  </g>
  
  <!-- User Interface -->
  <g>
    <rect x="450" y="480" width="180" height="90" rx="10" ry="10" fill="#f0f7fa" stroke="#34495e" stroke-width="2" />
    <text x="540" y="510" font-family="Arial" font-size="16" fill="#2c3e50" text-anchor="middle" font-weight="bold">사용자 인터페이스</text>
    <line x1="490" y1="525" x2="590" y2="525" stroke="#34495e" stroke-width="1" />
    <text x="540" y="545" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 시각화</text>
    <text x="540" y="565" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 제어 패널</text>
  </g>
  
  <!-- Neural Tissue -->
  <g>
    <rect x="100" y="480" width="180" height="90" rx="10" ry="10" fill="#f5e1e5" stroke="#e74c3c" stroke-width="2" />
    <text x="190" y="510" font-family="Arial" font-size="16" fill="#2c3e50" text-anchor="middle" font-weight="bold">대상 신경 조직</text>
    <line x1="140" y1="525" x2="240" y2="525" stroke="#e74c3c" stroke-width="1" />
    <text x="190" y="545" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 손상된 신경</text>
    <text x="190" y="565" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 생리학적 반응</text>
  </g>
  
  <!-- Data Storage & Management -->
  <g>
    <rect x="700" y="340" width="180" height="100" rx="10" ry="10" fill="#e8f8f5" stroke="#16a085" stroke-width="2" />
    <text x="790" y="370" font-family="Arial" font-size="16" fill="#2c3e50" text-anchor="middle" font-weight="bold">데이터 저장 &amp; 관리</text>
    <line x1="740" y1="385" x2="840" y2="385" stroke="#16a085" stroke-width="1" />
    <text x="790" y="405" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 실험 데이터 로깅</text>
    <text x="790" y="425" font-family="Arial" font-size="12" fill="#2c3e50" text-anchor="middle">- 모델 저장/로드</text>
  </g>
  
  <!-- Arrows -->
  <!-- Neural Signal to Processing -->
  <path d="M 280 160 L 360 160" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Processing to AI -->
  <path d="M 450 220 L 450 260 L 560 260 L 560 280" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- AI to Stimulation -->
  <path d="M 450 360 L 410 360" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Stimulation to Neural Tissue -->
  <path d="M 230 360 L 190 360 L 190 480" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Neural Tissue to Signal Acquisition (feedback loop) -->
  <path d="M 280 480 L 320 480 L 320 450 L 350 450 L 350 260 L 180 260 L 180 220" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Processing to Feedback -->
  <path d="M 540 160 L 620 160" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Feedback to AI -->
  <path d="M 710 220 L 710 260 L 600 260 L 600 280" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- AI to UI -->
  <path d="M 560 440 L 560 480" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- AI to Data Storage -->
  <path d="M 670 360 L 700 360" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- UI to Data Storage (configuration) -->
  <path d="M 630 525 L 750 525 L 750 440" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Legend -->
  <rect x="700" y="480" width="180" height="100" rx="5" ry="5" fill="#ffffff" stroke="#2c3e50" stroke-width="1" />
  <text x="790" y="500" font-family="Arial" font-size="14" fill="#2c3e50" text-anchor="middle" font-weight="bold">범례</text>
  <line x1="720" y1="510" x2="860" y2="510" stroke="#2c3e50" stroke-width="1" />
  
  <rect x="720" y="525" width="15" height="15" fill="url(#neural_grad)" stroke="#3498db" stroke-width="1" />
  <text x="780" y="535" font-family="Arial" font-size="12" fill="#2c3e50">하드웨어 모듈</text>
  
  <rect x="720" y="550" width="15" height="15" fill="url(#ai_grad)" stroke="#e67e22" stroke-width="1" />
  <text x="773" y="560" font-family="Arial" font-size="12" fill="#2c3e50">AI 모듈</text>
  
  <line x1="720" y1="575" x2="740" y2="575" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="790" y="578" font-family="Arial" font-size="12" fill="#2c3e50">데이터 흐름</text>
</svg>
